<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="main">

	<select id="selectSpaceCategory" parameterType="List" resultType="spacebook.submit.model.SpaceDTO">
		select * from space
		where (space_category, space_no) in (
    		select space_category, max (space_no) from space group by space_category
		)
		order by space_no desc
	</select>
	
	<select id="reviewList" resultType="spacebook.main.model.MainDTO">
		SELECT REV_NO, SPACE_NAME, REV_NOTE, REV_RATE, MEM_NAME, MEM_IMG FROM
(SELECT R.REV_NO, S.SPACE_NAME, R.REV_NOTE, R.REV_RATE, M.MEM_NAME, M.MEM_IMG FROM SPACE S INNER JOIN REVIEW R ON R.SPACE_NO = S.SPACE_NO INNER JOIN MEMBER M ON S.MEM_NO = M.MEM_NO
ORDER BY REV_NO DESC) WHERE ROWNUM BETWEEN 1 AND 5
	</select>
</mapper>